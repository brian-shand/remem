flowchart TD

    %% --- Relational Recursion Loop (A1) ---
    subgraph A1["Relational Recursion Loop:<br/>DR1–DR5<br/>Micro-Loop"]
        DR1["DR1: Invocation"]
        DR2["DR2: Engagement"]
        DR3["DR3: Reflection-in-action:<br/>Dialogue &<br/>Negotiation"]
        DR4["DR4: Emergence"]
        DR5["DR5: Resolution"]
        DR6["DR6: Protocol Refinement"]
        DR7["DR7: Artefact Production"]
        DR8["DR8: Drift/Loop"]
        DR1 --> DR2 --> DR3 --> DR4 --> DR5 --> DR6 --> DR7 --> DR8
        DR8 -->|loop| DR2
    end

    %% --- Reflective Recursion Loop (B1) ---
    subgraph B1["Reflective Recursion Loop:<br/>C3–D5<br/>Macro-Loop"]
        C3["C3: Structured Reflection"]
        D1["D1: Artefact Review"]
        D2["D2: Memory Mutation"]
        D3["D3: Meaning Emergence"]
        D5["D5: Clarity / Perturbation"]
        C3 --> D1 --> D2 --> D3 --> D5
        D5 -->|feeds insight| C3
    end

    %% --- Temporal Recursive Layer (C1) ---
    C1["Reflective Recursion<br/>(Temporal Bridge)"]

    %% --- Artefacts (L1) ---
    subgraph L1["Cognitive Ledger<br/><i>session history / mode / threadID / CLI path</i>"]
        D4["D4: CLI Tooling<br/><i>summarise / tag / convert / freeze</i>"]
        ART["ART: Remem Artefacts<br/><i>.md / .txt / .mp3 / #tags</i>"]
    end

    %% --- Flow Across Cycles ---
    DR8 --> C1 --> C3
    D5 --> |informs future invocation| DR1


    %% --- Reflexive Governance Field (D0) ---
    subgraph D0["Co-Governance:<br/>Reflexive Protocol Field"]
        A1
        C1
        B1
        L1
    end

    classDef dashedBox fill:none,stroke-dasharray: 5 5,stroke:#999;
    class D0 dashedBox;

    %% --- Floating annotation node ---
    GOV_NOTE["Note:<br/>Co-Governance governs all phases:<br/>– Protocol negotiation<br/>– Drift response<br/>– Custom evolution<br/>– CLI and invocation tuning"]
    style GOV_NOTE fill:none,stroke:none,font-style:italic